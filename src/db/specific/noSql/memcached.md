# Memcached

[Memcached](http://code.google.com/p/memcached/) представляет собой сервер, хранящий в оперативной памяти некоторые данные с заданным временем жизни. Доступ к данным осуществляется по ключу (имени). Вы можете думать о Memcached, как о [хэш-таблице](https://eax.me/hash-tables/), хранящейся на сервере. Применяется он в основном для кэширования кода веб-страниц, результатов запросов к базе данных и тп.

Также ничто не мешает использовать Memcached в качестве «не очень надежного» key-value хранилища. Например, в нем можно хранить сессии пользователей, коды капч или счетчик посетителей, находящихся в данный момент на сайте.

Коротко о главном:

- Умеет только key => value in memory
- Вытеснение. Когда Memcache доходит до ограничения в памяти, он начинает удалять объекты по принципу [LRU](https://ruhighload.com/%d0%9a%d1%8d%d1%88%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5+%d0%b4%d0%b0%d0%bd%d0%bd%d1%8b%d1%85#lru)(Least Recently Used). Memcache постарается удалить прежде всего те данные, которые запрашивались очень давно (т.е. менее популярные удалит, а более популярные оставит).
- Шардинг из коробки(достаточно просто добавлять сервера, вся работа будет инкапсулирована в него)
- Максимальная длина ключа по умолчанию составляет 250 байт, а длина значения — 1 Мб;
- [Будьте осторожнее со спец-символами](https://eax.me/memcached/#comment-432394490);
- Ключи можно «расширить», воспользовавшись каким-нибудь MD5 или SHA512 (в этом случае нехэшированный ключ будет разумно продублировать в значении);
- Если хочется хранить очень длинные значения, можно сжимать их и/или разбивать на части;
- Весь ввод-вывод осуществляется с помощью [libevent](https://eax.me/libevent/);
- Для ускорения работы память выделяется при запуске демона и не освобождается до его остановки;
- Для борьбы с фрагментацией памяти используется [slab allocator](http://ru.wikipedia.org/wiki/Slab);
- Все операции являются атомарными, есть поддержка [compare-and-swap](http://ru.wikipedia.org/wiki/%D0%A1%D1%80%D0%B0%D0%B2%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81_%D0%BE%D0%B1%D0%BC%D0%B5%D0%BD%D0%BE%D0%BC);
- С Memcached можно работать по UDP;
- Помимо текстового протокола [также существует бинарный](http://code.google.com/p/memcached/wiki/BinaryProtocolRevamped);



*Дополнительно:*

- [Кэширование и Memcached](https://zinvapel.github.io/it/tools/2017/11/27/cache/)

